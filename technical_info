newSpeed = changeDir[getHash(ballIndex, field, oldSpeed)];

function getHash(ballIndex, field, speed) {
    var hash, i;

    i = ballIndex - numCols - 1;
    hash = 2 * field[i] + 4 * field[i + 1] + 8 * field[i + 2];

    i = ballIndex - 1;
    hash += 16 * field[i] + 32 * field[i + 2];

    i = ballIndex + numCols - 1;
    hash += 64 * field[i] + 128 * field[i + 1] + 256 * field[i + 2];

    hash += 512 * speed.x + 1024 * speed.y;

    return hash;
}
